<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Slider</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
   integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
   crossorigin=""/>
   <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
   integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
   crossorigin=""></script>
    <link rel="stylesheet" href="./style/styling.css"/>
</head>
<body>

        <div id="mapid"></div>
    <div class="value">0</div>
    <input type="range" min="0" max="10" step="1" value="0">
   
    
<script>
    let togle;
    let markers = [];

    let mymap = L.map('mapid').setView([51.505, 0], 4);
    var OpenStreetMap_Mapnik = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(mymap);

    let bounds = mymap.getBounds();
    
    for(let i = 0;i < 100;i++){
        let north = bounds._northEast;
        let south = bounds._southWest;
        marker = L.marker([latitude(north.lat, south.lat), longitude(north.lng, south.lng)]);
        marker.numerable = Math.floor(Math.random() * ((10 - 1) + 1) + 1);
        markers.push(marker);
    }
    L.control.scale().addTo(mymap);

    function latitude(north, south) {
    return Math.floor(Math.random() * (north - south) + 1) + south;
    }
    function longitude(north, south) {
    return Math.floor(Math.random() * (north - south) + 1) + south;
    }

    //slider
    var elem = document.querySelector('input[type="range"]');

    function rangeValue(){
        var newValue = elem.value;
        var target = document.querySelector('.value');
        target.innerHTML = newValue;
        showMarkers(newValue);
    }
    elem.addEventListener("input", () => {
        rangeValue();
        togle = 1;
    });

    function showMarkers(val){
        let show = markers.filter(x => x.numerable <= val);
        console.log(show[0]);
        let hide = markers.filter(x => x.numerable > val);
        for(let i = 0;i < show.length; i++){
            show[i].addTo(mymap);
        }
        for(let i = 0;i < hide.length; i++){
            mymap.removeLayer(hide[i]);
        }
    }
    function auto(){
        setInterval(function(){ 
            if(elem.value <=10 && togle != 1){
                elem.value++;
                rangeValue();
            }
         }, 1000);
    }
    auto();
</script>
</body>
</html>